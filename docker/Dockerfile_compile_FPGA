# Dockerfile for compiling FPGA source

FROM centos_quartus:latest
RUN mkdir /artifacts
COPY . /home/git/pystorm
ENV LM_LICENSE_FILE="/home/git/pystorm/FPGA/quartus/okAlteraLicense.dat"
WORKDIR /home/git/pystorm/FPGA/quartus
CMD ./build_project.sh && \
    cp output_files/OKCoreBD.rbf /artifacts/ && \
    cp output_files/setup.rpt /artifacts/ && \
    cp output_files/hold.rpt /artifacts/ && \
    cp output_files/recovery.rpt /artifacts/ && \
    cp output_files/removal.rpt /artifacts/
VOLUME /artifacts